# 개발 셋업

[English](../English/Development%20Setup.md)

## 엔진 설치

원하는 위치에 엔진을 설치합니다.

```shell
$ git clone -b buildable --recurse-submodules https://github.com/Othereum/Otherengine
```

## 게임 프로젝트 구성

템플릿을 사용하면 빠르고 간편하게 게임 프로젝트를 구성할 수 있습니다: <https://github.com/Othereum/Otherengine-Template>

## 의존성 설치

항목 | 최소 버전 | 자동 설치
--- | --- | ---
MSVC\* | 14.26 | X
Clang\* | 10 | `Generate.sh` - apt
GCC\* | 10 | `Generate.sh` - apt
[CMake](https://cmake.org/download) | 3.14 | `InstallDeps.sh` - wget

\* *셋 중 하나만 있으면 됩니다.*

항목 | 최소 버전 | 자동 설치
--- | --- | ---
[{fmt}](https://github.com/fmtlib/fmt) | 7.0.0 | CMakeLists.txt - git
[spdlog](https://github.com/gabime/spdlog) | 1.7.0 | CMakeLists.txt - git
[nlohmann-json](https://github.com/nlohmann/json) | 3.9.0 | CMakeLists.txt - git
[SDL2](https://www.libsdl.org/download-2.0.php) | | `InstallDeps.sh` - apt
[GLEW](https://github.com/nigels-com/glew) | | `InstallDeps.sh` - apt
[SOIL2](https://github.com/SpartanJ/SOIL2) | | CMakeLists.txt - git
[omem](https://github.com/Othereum/omem) | | CMakeLists.txt - git
[otm](https://github.com/Othereum/otm) | | CMakeLists.txt - git

- Linux

  Shell에 아래 명령을 입력하면 됩니다:

  ```shell
  MyGame$ path_to_engine/Scripts/InstallDeps.sh
  ```

- Windows

  Windows에서는 스크립트를 사용할 수 없습니다. 라이브러리를 설치하려면 [vcpkg](https://github.com/microsoft/vcpkg)를 사용하세요.

  > **주의**: vcpkg의 기본 triplet은 x86-windows입니다. x64 패키지를 설치하려면 직접 명시해주어야 합니다.  
  > 예) `vcpkg install sdl2:x64-windows glew:x64-windows`
  >
  > 기본 triplet을 변경하는 방법도 있습니다. 시스템 환경변수 `VCPKG_DEFAULT_TRIPLET`의 값을 `x64-windows`로 설정하면 됩니다.
  >
  > **주의 2**: Visual Stduio 2019 16.6.5 기준, vcpkg를 `Program Files`에 설치하면 CMake 캐시를 생성할 때마다 toolchain이 변경되었다고 착각하여 완전 삭제 후 재생성하는 버그가 있습니다. `%USERPROFILE%`에 설치할 것을 권장합니다.

> **팁**: 웬만하면 라이브러리는 수동으로 설치하세요. CMakeLists.txt 자동 설치는 빌드 속도를 저하시킵니다.

## 생성 및 빌드

- Linux

  - 생성

    ```shell
    MyGame$ path_to_engine/Scripts/Generate.sh [compiler] [cmake_args...]
    ```

    - `[compiler]`: 사용할 컴파일러를 지정합니다. gcc 또는 clang을 지정할 수 있습니다. 기본값은 clang입니다.
    - `[cmake_args...]`: CMake로 전달되는 추가 명령줄 옵션입니다.

  - 빌드

    ```shell
    MyGame$ path_to_engine/Scripts/Build.sh [compiler] [cmake_args] [build_args]
    ```

    - `[compiler]`: 사용할 컴파일러를 지정합니다.
    - `[cmake_args]`: CMake로 전달되는 추가 명령줄 옵션입니다. 여러 개인 경우 따옴표로 묶어야 합니다.
    - `[build_args]`: -- 뒤에 전달되는 네이티브 빌드 스위치를 지정합니다. 여러 개인 경우 따옴표로 묶어야 합니다.

- Windows

  Visual Studio를 사용하면 쉽고 간단하게 빌드할 수 있습니다. 자세한 내용은 [Visual Studio의 CMake 프로젝트](https://docs.microsoft.com/ko-kr/cpp/build/cmake-projects-in-visual-studio?view=vs-2019)를 확인하세요.

위 과정을 모두 완료하면 Windows에서는 빌드 결과물이 이렇게 나올 것입니다:

```text
◢ MyGame
  ◢ Binaries
      Otherengine-Core.dll
      Othrengine-Engine.dll
      Otherengine-Renderer.dll
      MyGame.exe
      MyGame-Module.dll
      ...
  ▷ out
  ▷ Source
    CMakeLists.txt
    CMakeSettings.json
    ...
```

빌드 결과물은 모두 Binaries에 저장됩니다. 실험삼아 MyGame.exe를 실행해보세요. 잘 작동한다면, 아직은 아무것도 없으니 검은 화면이 보일 것입니다.

됐습니다! 이렇게 해서 개발 셋업을 마쳤습니다. 이제 본격적으로 개발을 시작하실 수 있습니다.
