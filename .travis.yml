language: cpp
dist: focal

addons:
  sonarcloud:
    organization: "othereum"
    token:
      secure: "CROa/ukPoqQfWZ0/1hxqRIGEXOwMKDWqBPYFftH9PV7n5QKYqRDi7hZRpugsIJcFtXP0Y4Gz9CzYczKzixpHD5ShpA488T3OR5lyCn3R//JRZh8Bizta5oIsLIkghH1NQLDoa5CAd6Lex2BLtXyCc69Iu75VgR8tUuzawDbGL2ID0e7qVwCNtZsHJT8fQnzhdXQh/KfkwD0htjfzWR2/dou5iLgvdnxBsfg9FR7bQQTAaQdeOxRF/p2uwAZJGnSuNS1asMtPxXXygNXcyYUrJFecDyzaxDKP+kxW3zOBIYRd9bwriszXGXAea9p+p0LradGwQFx8E9X9vLzHUvz6N9qBXpg5TzQVk40sbtEXMjoRP1xHZ3VIX0GtdAohoTfdzim8379uaLLBuWP9ylHzr4OWroAZYUJDOH3rijK+1KC1azMoyNb3lLFAJPl7XW0GehTpnWALVZc9GqeALSkIZ/yibZ/f+NXFqs+g+SJ/77uFNB0WWnFEMMznnx2Hyo01Y1yk3Tx0QSg85VGptY7cIC79D3ae6VPRPVwXxTgqxvIyLQMgYEI66/lpipg2vYlOS2CEF5EnamP3y5hjx+IXVRTrvgddYdnKWNH843jFc12oBEaObC2hLS6cUIqa1CaiNgzsGU3oFZkosIeZSQJOgmVNDqadQBR+Ii8uAh8iK0s="
  apt:
    update: true
    sources:
      - ubuntu-toolchain-r-test
      - sourceline: 'deb http://apt.llvm.org/focal/ llvm-toolchain-focal-10 main'
        key_url: 'https://apt.llvm.org/llvm-snapshot.gpg.key'
    packages:
      - clang-10
      - clang++-10
      - llvm-10-dev
      - libstdc++-10-dev

script:
  - ./configure
  - build-wrapper-linux-x86-64 --out-dir bw-output cmake --build out/ -- -j
  - sonar-scanner -Dsonar.cfamily.build-wrapper-output=bw-output
